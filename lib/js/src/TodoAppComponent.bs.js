// Generated by BUCKLESCRIPT VERSION 2.1.0, PLEASE EDIT WITH CARE
'use strict';

var List                             = require("bs-platform/lib/js/list.js");
var $$Array                          = require("bs-platform/lib/js/array.js");
var Block                            = require("bs-platform/lib/js/block.js");
var Curry                            = require("bs-platform/lib/js/curry.js");
var React                            = require("react");
var Pervasives                       = require("bs-platform/lib/js/pervasives.js");
var ReasonReact                      = require("reason-react/lib/js/src/ReasonReact.js");
var TodoItem$ReactTemplate           = require("./TodoItem.bs.js");
var TodoItemComponent$ReactTemplate  = require("./TodoItemComponent.bs.js");
var TodoInputComponent$ReactTemplate = require("./TodoInputComponent.bs.js");

function str(prim) {
  return prim;
}

var component = ReasonReact.reducerComponent("TodoApp");

var lastId = [0];

function newItem(text) {
  lastId[0] = lastId[0] + 1 | 0;
  return TodoItem$ReactTemplate.newItem(lastId[0], text);
}

function toggleOneItem(id, items) {
  return List.map((function (param) {
                return TodoItem$ReactTemplate.toggleItem(id, param);
              }), items);
}

function make() {
  var newrecord = component.slice();
  newrecord[/* render */9] = (function (param) {
      var items = param[/* state */2][/* items */0];
      var reduce = param[/* reduce */1];
      var numItems = List.length(items);
      return React.createElement("div", {
                  className: "app"
                }, React.createElement("div", {
                      className: "title"
                    }, "What to do", ReasonReact.element(/* None */0, /* None */0, TodoInputComponent$ReactTemplate.make(Curry._1(reduce, (function (text) {
                                    return /* AddItem */Block.__(0, [text]);
                                  })), /* array */[]))), React.createElement("div", {
                      className: "items"
                    }, $$Array.of_list(List.map((function (item) {
                                return ReasonReact.element(/* Some */[Pervasives.string_of_int(item[/* id */0])], /* None */0, TodoItemComponent$ReactTemplate.make(item, Curry._1(reduce, (function () {
                                                      return /* ToggleItem */Block.__(1, [item[/* id */0]]);
                                                    })), /* array */[]));
                              }), items))), React.createElement("div", {
                      className: "footer"
                    }, Pervasives.string_of_int(numItems) + " items"));
    });
  newrecord[/* initialState */10] = (function () {
      return /* record */[/* items : [] */0];
    });
  newrecord[/* reducer */12] = (function (action, param) {
      var items = param[/* items */0];
      if (action.tag) {
        var id = action[0];
        return /* Update */Block.__(0, [/* record */[/* items */List.map((function (param) {
                            return TodoItem$ReactTemplate.toggleItem(id, param);
                          }), items)]]);
      } else {
        return /* Update */Block.__(0, [/* record */[/* items : :: */[
                      newItem(action[0]),
                      items
                    ]]]);
      }
    });
  return newrecord;
}

exports.str           = str;
exports.component     = component;
exports.lastId        = lastId;
exports.newItem       = newItem;
exports.toggleOneItem = toggleOneItem;
exports.make          = make;
/* component Not a pure module */
